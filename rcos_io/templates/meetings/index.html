{% extends "/base.html" %}

{% block head %}
<!-- Fullcalendar CSS -->
<link
	rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css"
/>

<!-- Fullcalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
{% endblock %}

{% block content %}
<div class="container">
	<h1>Meetings</h1>
	{% include '/_includes/flashed_messages.html' %}

	<div id='calendar'></div>

	<script>
	// Initialize Fullcalendar
		document.addEventListener('DOMContentLoaded', function() {
		var calendarEl = document.getElementById('calendar');
		var calendar = new FullCalendar.Calendar(calendarEl, {
			initialView: 'dayGridMonth',
			events: '/meetings/api/events'
		});
		calendar.render();
	});
	</script>

	{% if session.get("is_coordinator_or_above") %}
	<div class="card my-2">
		<div class="card-header">
			Administrator Controls
		</div>
		<div class="card-body">
			<a href="{{ url_for('meetings.add') }}" class="btn btn-success">
				<i class="bi bi-plus-lg"></i>
				Add Meeting
			</a>
			<a href="https://rcos-hasura.up.railway.app/console/data/default/schema/public/tables/meetings/browse" class="btn btn-light" target="_blank">Edit on Hasura</a>
		</div>
	</div>
	{% endif %}
</div>
{% endblock %}